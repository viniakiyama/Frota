<form [formGroup]="cadastroVeiculoForm" (ngSubmit)="onSubmit()">
  <div class="container-fluid mt-4">
    <h2 class="mb-4">Cadastro de Veículos</h2>
    <div class="card shadow-sm mb-5">
      <div class="card-header bg-primary text-white">Cadastrar Novo Veículo</div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Placa</label>
            <input type="text" class="form-control" formControlName="placa" placeholder="ABC1D23" maxlength="7"
              style="text-transform: uppercase" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '')">
          </div>
          <div class="col-md-4">
            <label class="form-label">Número do Chassi</label>
            <input type="text" class="form-control" formControlName="chassi" maxlength="17"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')">
          </div>
          <div class="col-md-4">
            <label class="form-label">RENAVAM</label>
            <input type="text" class="form-control" formControlName="renavam" maxlength="11"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')">
          </div>
          <div class="col-md-3">
            <label class="form-label">Modelo</label>
            <input type="text" class="form-control" formControlName="modelo">
          </div>

          <div class="col-md-3">
            <label class="form-label">Marca</label>
            <input type="text" class="form-control" formControlName="marca">
          </div>

          <div class="col-md-3">
            <label class="form-label">Ano</label>
            <input type="number" class="form-control" formControlName="ano" maxlength="4">
          </div>
          <div class="col-md-3">
            <label class="form-label">Categoria</label>
            <select class="form-control" formControlName="categoria">
              <option value="CARRO">Carro</option>
              <option value="MOTO">Moto</option>
              <option value="CAMINHÃO">Caminhão</option>
              <option value="VAN">Van</option>
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label">KM Atual</label>
            <input type="number" class="form-control" formControlName="quilometragemAtual">
          </div>
          <div class="col-md-4">
            <label class="form-label">Situação</label>
            <select class="form-control" formControlName="situacao">
              <option value="DISPONIVEL">Disponível</option>
              <option value="ALUGADO">Alugado</option>
              <option value="EM MANUTENCAO">Em manutenção</option>
              <option value="INATIVO">Inativo</option>
            </select>
          </div>
          <div class="col-md-4">
            <label>Local de Alocação</label>
            <select formControlName="localAlocacao" class="form-control">
              <option value="">SELECIONE UM LOCAL</option>
              <option value="MATRIZ">MATRIZ</option>
              <option value="FILIAL SÃO PAULO">FILIAL SÃO PAULO</option>
              <option value="FILIAL RIO DE JANEIRO">FILIAL RIO DE JANEIRO</option>
              <option value="GARAGEM CENTRAL">GARAGEM CENTRAL</option>
              <option value="EM MANUTENÇÃO">EM MANUTENÇÃO</option>
            </select>
          </div>
          <div class="col-12">
            <label class="form-label">Observações</label>
            <textarea class="form-control" formControlName="observacoes" rows="2"></textarea>
          </div>
          <div class="col-12 text-end mt-4">
            <button type="submit" class="btn btn-success px-5" [disabled]="!cadastroVeiculoForm.valid">
              Salvar Veículo
            </button>
          </div>
        </div>
      </div>
    </div>
    <h3 class="mb-3">Lista de Veículos</h3>
    <div class="table-responsive">
      <table class="table table-hover table-bordered shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>Placa</th>
            <th>Chassi</th>
            <th>Renavam</th>
            <th>Modelo</th>
            <th>Marca</th>
            <th>Ano</th>
            <th>Categoria</th>
            <th>Quilometragem Atual</th>
            <th>Situação</th>
            <th>Local Alocação</th>
            <th>Observações</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let v of veiculos">
            <td>{{ v.placa }}</td>
            <td>{{ v.chassi }}</td>
            <td>{{ v.renavam }}</td>
            <td>{{ v.modelo }}</td>
            <td>{{ v.marca }}</td>
            <td>{{ v.ano }}</td>
            <td>{{ v.categoria }}</td>
            <td>{{ v.quilometragemAtual }}</td>
            <td [style.color]="v.situacao === 'INATIVO' ? 'red' : 'inherit'"
              [style.font-weight]="v.situacao === 'INATIVO' ? 'bold' : 'normal'">
              {{ v.situacao }}
            </td>
            <td>{{ v.localAlocacao }}</td>
            <td>{{ v.observacoes }}</td>
            <td>
              <button type="button" class="btn btn-warning btn-sm" (click)="prepararEdicao(v)">
                Editar
              </button>
            </td>
            <td>
              <button class="btn btn-danger btn-sm" (click)="excluir(v.id)">
                Excluir
              </button>
            </td>
            <td>
              <button *ngIf="v.situacao !== 'INATIVO'" class="btn btn-dark btn-sm" (click)="desativarVeiculo(v)">
                Desativar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</form>